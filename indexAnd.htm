<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>jQuery Ajax - XML</title>
<script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script>

<script type="text/javascript">
function createCORSRequest(method, url){
    var xhr = new XMLHttpRequest();
    if ("withCredentials" in xhr){
        // XHR has 'withCredentials' property only if it supports CORS
        xhr.open(method, url, true);
    } else if (typeof XDomainRequest != "undefined"){ // if IE use XDR
        xhr = new XDomainRequest();
        xhr.open(method, url);
    } else {
        xhr = null;
    }
    return xhr;
}
    $(document).ready(function () {


        var xmlDoc = document.implementation.createDocument("", "test", null);

        function documentLoaded (e) {
            alert(new XMLSerializer().serializeToString(e.target)); // Gives querydata.xml contents as string
        }

        xmlDoc.addEventListener("load", documentLoaded, false);
        xmlDoc.load('http://konkurrence.rejseplanen.dk/bin/rest.exe/location?input=ROme.xml');

//        alert('....');
//        var request = createCORSRequest( "get", "https://igweb.meridiana.it/security/login.aspx" );
//         alert(request);
//       $.get('http://cors-support.com/api', function( data ) {
//      alert( data);
//    });
//         var xml = $.parseXML(data)
//         alert(xml);

//        $.ajax({
//            url: "http://konkurrence.rejseplanen.dk/bin/rest.exe/location?input=ROme",
//            type: "GET",
//            dataType: "jsonp xml",
//            success: function(data) {
//                alert(data);
//                var xml = $.parseXML(data)
//                alert(xml);
//                $(xml).find('StopLocation').each(function()
//            {
//                var name = $(this).attr('name');
//                alert(name);
//            });       
//            }
//        });
//        
//        $.ajax({
//            url: 'http://theresidency.libsyn.com/rss',
//            type: 'GET',
//            dataType: "xml"
//        }).done(function (xml) {
//            $.each($("item", xml), function (i, e) {
//                alert('--');
//                $("#resp").append($("enclosure").attr("url").text() + "<br />");
//            });
//        });

//        $.ajax({
//            type: "GET",
//            url: "http://think2loud.com/examples/xml/sites.xml",
//            dataType: "json",
//            success: function (xml) {
//                $(xml).find('site').each(function () {
//                    //alert('ok');
//                    var id = $(this).attr('id');
//                    var title = $(this).find('title').text();
//                    alert(title);
//                    var url = $(this).find('url').text();
//                    $('<div class="items" id="link_' + id + '"></div>').html('<a href="' + url + '">' + title + '</a>').appendTo('#page-wrap');
//                    $(this).find('desc').each(function () {
//                        var brief = $(this).find('brief').text();
//                        var long = $(this).find('long').text();
//                        $('<div class="brief"></div>').html(brief).appendTo('#link_' + id);
//                        $('<div class="long"></div>').html(long).appendTo('#link_' + id);
//                    });
//                });
//            }
//        });


//        // when the tag with id="buton" is clicked, performs a Ajax GET request to an XML file
//        // gets the XML data, parses oits elements and dysplays its data
//        $('#buton').click(function () {

//            $.ajax({
//                type: 'get',
//                url: 'weather.xml',
//                beforeSend: function () {
//                    // before send the request, displays a "Loading..." messaj in the element where the response will be placed
//                    $('#resp').html('Loading...');
//                },
//                timeout: 10000,        // sets timeout for the request (10 seconds)
//                error: function (xhr, status, error) { alert('Error: ' + xhr.status + ' - ' + error); },     // alert a message in case of error
//                dataType: 'xml',
//                success: function (response) {
//                    $('#resp').html('');        // removes the "loading..." notification from "#resp"

//                    // gets and parse each child element in <webpages>
//                    $(response).find('time').children().each(function () {
//                        // gets the "id", "title", and "url" of current child element

//                        var elm = $(this);
//                        var from = elm.attr('from');
//                        //var to = elm.attr('from');
//                        var to = elm.find('from').text();
//                        alert(from);

//                        // displays data
//                        //$('#resp').append(id + ') from: <b>' + from + '</b> -- to: <b>' + to + '</b><br />');
//                    });
//                }
//            });
//        });
    });
--></script>
</head>
<body>
<div id="resp">Here will be displayed the data from the XML file.</div><br />
<button id="buton">Click</button>
</body>
