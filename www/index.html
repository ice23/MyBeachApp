<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <!--<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />-->
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Sardinia Beach Finder</title>
    <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    <link rel="stylesheet" href="css/jqm-docs.css" />
    <link rel="stylesheet" href="css/main.css" />
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/jquery.cycle.all.js"></script>
    <script src="js/jquery.easing.js"></script>
    <script type="text/javascript" charset="utf-8">
        // Wait for PhoneGap to load
        var isDeviceOnline = 'NO';

        document.addEventListener("deviceready", onDeviceReady, false);
        function onDeviceReady() {
            //alert('checkConnection');
            checkConnection();

            navigator.geolocation.getCurrentPosition(onSuccess, onError);
        }

        function alertDismissed() {
            // do something
        }

        function checkConnection() {
            var networkState = navigator.network.connection.type;
            var states = {};
            states[Connection.UNKNOWN] = 'Unknown connection';
            states[Connection.ETHERNET] = 'Ethernet connection';
            states[Connection.WIFI] = 'WiFi connection';
            states[Connection.CELL_2G] = 'Cell 2G connection';
            states[Connection.CELL_3G] = 'Cell 3G connection';
            states[Connection.CELL_4G] = 'Cell 4G connection';
            states[Connection.NONE] = 'No network connection';
            //alert('Connection type: ' + states[networkState]);

            if (states[networkState] != states[Connection.NONE]) {
                isDeviceOnline = "YES"
            }

            navigator.notification.alert(
                states[networkState],  // message
                alertDismissed,         // callback
                'Connection type',            // title
                'Done'                  // buttonName
            );
        }

        // onSuccess Geolocation
        //
        function onSuccess(position) {
            //alert('ok');
            //            alert('Latitude: ' + position.coords.latitude + '\n' +
            //                            'Longitude: ' + position.coords.longitude + '\n' +
            //                            'Altitude: ' + position.coords.altitude + '\n' +
            //                            'Accuracy: ' + position.coords.accuracy + '\n' +
            //                            'Altitude Accuracy: ' + position.coords.altitudeAccuracy + '\n' +
            //                            'Heading: ' + position.coords.heading + '\n' +
            //                            'Speed: ' + position.coords.speed + '\n' +
            //                            'Timestamp: ' + position.timestamp + '\n');
        }

        // onError Callback receives a PositionError object
        //
        function onError(error) {
            alert('code: ' + error.code + '\n' +
              'message: ' + error.message + '\n');
        }

        $(document).bind("mobileinit", function (event) {
            $.extend($.mobile.zoom, { locked: true, enabled: false });
        });
    </script>
    <script src="js/jqm-docs.js"></script>
    <script src="js/jquery.mobile-1.1.1.js"></script>
    <script type="text/javascript" src="js/jquery.cycle.all.js"></script>
    <script type="text/javascript" src="js/jquery.easing.js"></script>
    <script type="text/javascript" src="js/new-swipe.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            /* Swipe Variables */
            $.fn.cycle.transitions.scrollHorzTouch = function ($cont, $slides, opts) {
                $cont.css('overflow', 'hidden').width();
                opts.before.push(function (curr, next, opts, fwd) {

                    if (opts.rev)
                        fwd = !fwd;

                    positionNext = $(next).position();
                    positionCurr = $(curr).position();

                    $.fn.cycle.commonReset(curr, next, opts);
                    if ((positionNext.left > 0 && fwd) || (positionNext.left < 0 && !fwd)) {
                        opts.cssBefore.left = positionNext.left;
                    }
                    else {
                        opts.cssBefore.left = fwd ? (next.cycleW - 1) : (1 - next.cycleW);
                    }
                    if ((positionCurr.left > 0 && fwd) || (positionCurr.left < 0 && !fwd)) {
                        opts.animOut.left = positionCurr.left;
                    }
                    else {
                        opts.animOut.left = fwd ? -curr.cycleW : curr.cycleW;
                    }

                });
                opts.cssFirst.left = 0;
                opts.cssBefore.top = 0;
                opts.animIn.left = 0;
                opts.animOut.top = 0;
            };
            var currenSlide = null;
            var slideNumber = 0;
            var currentLeft = 0;
            var leftStart = 0;
            var sliderExpr;
            var slideFlag = false;

            $('#rotating-item-wrapper').cycle({
                fx: 'scrollHorzTouch',
                timeout: 1000,
                pager: '#nav',
                speedIn: 400,
                speedOut: 400,
                slideExpr: 'img',
                next: '#nextBt',
                prev: '#prevBt',
                before: beforeSlide,
                after: afterSlide,
                startingSlide: 0


            });
            $('#rotating-item-wrapperBeach').cycle({
                fx: 'scrollHorzTouch',
                timeout: 1000,
                pager: '#nav',
                speedIn: 400,
                speedOut: 400,
                slideExpr: 'img',
                next: '#nextBt',
                prev: '#prevBt',
                before: beforeSlide,
                after: afterSlide,
                startingSlide: 0


            });



            $('#rotating-item-wrapper').swipe({ swipeMoving: function (pageX) {

                if (slideFlag) return;

                var newLeft = currentLeft - pageX;

                currenSlide.css('left', newLeft + 'px');

                var $slides = $(sliderExpr, $('#rotating-item-wrapper'));
                var scrollSlide;

                nextSlideLeft = newLeft > 0 ? newLeft - currenSlide.width() : newLeft + currenSlide.width();
                flag = newLeft > 0 ? -1 : 1;
                scrollSlide = slideNumber + flag;
                if (scrollSlide < 0 || scrollSlide > ($slides.length - 1)) {
                    scrollSlide = scrollSlide < 0 ? $slides.length - 1 : 0;
                }

                $slides.eq(scrollSlide).css('left', nextSlideLeft + 'px');
                $slides.eq(scrollSlide).show();
            },
                swipeLeft: function () { $('#rotating-item-wrapper').cycle('next'); },
                swipeRight: function () { $('#rotating-item-wrapper').cycle('prev'); }


            });
            $('#rotating-item-wrapperBeach').swipe({ swipeMoving: function (pageX) {

                if (slideFlag) return;

                var newLeft = currentLeft - pageX;

                currenSlide.css('left', newLeft + 'px');

                var $slides = $(sliderExpr, $('#rotating-item-wrapperBeach'));
                var scrollSlide;

                nextSlideLeft = newLeft > 0 ? newLeft - currenSlide.width() : newLeft + currenSlide.width();
                flag = newLeft > 0 ? -1 : 1;
                scrollSlide = slideNumber + flag;
                if (scrollSlide < 0 || scrollSlide > ($slides.length - 1)) {
                    scrollSlide = scrollSlide < 0 ? $slides.length - 1 : 0;
                }

                $slides.eq(scrollSlide).css('left', nextSlideLeft + 'px');
                $slides.eq(scrollSlide).show();
            },
                swipeLeft: function () { $('#rotating-item-wrapperBeach').cycle('next'); },
                swipeRight: function () { $('#rotating-item-wrapperBeach').cycle('prev'); }


            });


            // Call this function before the slide start
            function beforeSlide(curr, next, opt) {
                sliderExpr = opt.slideExpr;
                slideFlag = true;
            }

            // Call this function after the slide start
            function afterSlide(curr, next, opt) {
                currenSlide = $(next);
                slideNumber = opt.currSlide;
                currentLeft = $(next).position().left;
                slideFlag = false;
            }


        });



    </script>
    <!--  boh -->
    <link rel="stylesheet" href="css/menu/font-awesome.min.css" />
    <!-- SlidePanel Css -->
    <link rel="stylesheet" href="css/menu/stylesheet.css" />
    <script src="js/menu/bootstrap.min.js"></script>
    <!-- SlidePanel jQuery -->
    <script src="js/menu/jquery.slidepanel.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $.SlidePanel();
        });
    </script>
    <script type="text/javascript" src="js/gauge.js"></script>
    <style type="text/css">
        #test_default, #gauge_pres, #test_medium, #test_small
        {
            border: 1px solid #333;
        }
    </style>
    <script type="text/javascript" src="js/highcharts/highcharts.js"></script>
    <script type="text/javascript" src="js/highcharts/highcharts-more.js"></script>
    <script type="text/javascript" src="api/OpenLayers.js"></script>
    <script type="text/javascript" src="js/highcharts/modules/data.js"></script>
    <script type="text/javascript" src="js/highcharts/modules/exporting.js"></script>
    <script type="text/javascript" src="js/charts_mini.js"></script>
    <script type="text/javascript" src="js/googlejs.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="js/jquery.ui.map.min.js"></script>
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyC5ukXmt0pQ3lvvi3NrfZX7LJKyW67TgK0&sensor=false"
        type="text/javascript"></script>
    <script type="text/javascript" src="js/my/jmain.js"></script>
    <script type="text/javascript" src="js/my/jmapliveshow.js"></script>
    <script type="text/javascript" src="js/my/googleutils.js"></script>
    <script type="text/javascript" src="js/my/jbeachliveshow.js"></script>
    <script type="text/javascript" src="js/my/jmeteoliveshow.js"></script>
    <script type="text/javascript" src="js/my/JchartLiveShow.js"></script>
    <script type="text/javascript" src="js/my/jcompass.js"></script>
    <script type="text/javascript" src="js/my/jcompass.js"></script>
    <script type="text/javascript" src="js/my/MyIndexeddb.js"></script>
    <script src="js/my/ReadXml.js" type="text/javascript"></script>
    <!--<link rel="stylesheet" href="js/lib/jquery.mobile-1.0a4.1/jquery.mobile-1.0a4.1.min.css" />
    <link href="js/lib/photoswipe.css" type="text/css" rel="stylesheet" />
	<style type="text/css">
		div.gallery-row:after { clear: both; content: "."; display: block; height: 0; visibility: hidden; }
		div.gallery-item { float: left; width: 33.333333%; }
		div.gallery-item a { display: block; margin: 5px; border: 1px solid #3c3c3c; }
		div.gallery-item img { display: block; width: 100%; height: auto; }
		#Gallery1 .ui-content, #Gallery2 .ui-content { overflow: hidden; }
	</style>
    <script type="text/javascript" src="js/lib/simple-inheritance.min.js"></script>
	<script type="text/javascript" src="js/lib/code-photoswipe-jQuery-1.0.11.min.js"></script>-->
    <link href="js/lib/photoswipe.css" type="text/css" rel="stylesheet" />
    <style type="text/css">
        div.gallery-row:after
        {
            clear: both;
            content: ".";
            display: block;
            height: 0;
            visibility: hidden;
        }
        div.gallery-item
        {
            float: left;
            width: 33.333333%;
        }
        div.gallery-item a
        {
            display: block;
            margin: 5px;
            border: 1px solid #3c3c3c;
        }
        div.gallery-item img
        {
            display: block;
            width: 100%;
            height: auto;
        }
        #Gallery1 .ui-content, #Gallery2 .ui-content
        {
            overflow: hidden;
        }
    </style>
    <script type="text/javascript" charset="utf-8">

        var lat1 = 0;
        var lngt1 = 0;
        var dist1 = 1000;
        var lat2 = 0;
        var lngt2 = 0;
        var dist2 = 1000;
        var lat3 = 0;
        var lngt3 = 0;
        var dist3 = 1000;
        var lat4 = 0;
        var lngt4 = 0;
        var dist4 = 1000;
        var lat5 = 0;
        var lngt5 = 0;
        var dist5 = 1000;
        var count_tmp_beach = 0;
        var infowindow = null;
        var map = null;
        var imgWindOK = null;
        var imgWindKO = null;
        var sites = null;
        var status = 'close';
        var shape = null;
        var WindDir = '';
        var WindSpeed = 0;
        var beachfinderby = 'wind';
        var Hpa = 0;
        var mylng = 0;
        var mylat = 0;
        var OriginPosition = '';
        var markerMyPosition = null;
        var flipView = 'N';
        var slideBussola = 'N';
        var meteo_already_open = 0;
        var forecast_already_open = 0;
        var dt_Last_meteo = new Date();
        var dt_Last_forecast = new Date();


        var lat1click = 0;
        var lng1click = 0;

        var options, gm, gms, testOverflowMin, testOverflowMax, periodicRand;


        imgWindOK = {
            url: 'images/face-smile-big.png'
        };

        imgWindKO = {
            url: 'images/face-angry.png'
        };

        shape = {
            coord: [1, 1, 1, 20, 18, 20, 18, 1],
            type: 'poly'
        };


        function get_cookie(name) {
            var matches = document.cookie.match(new RegExp(
	      "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
	    ))
            return matches ? decodeURIComponent(matches[1]) : ''
        }


        function set_cookie(name, value, expires) {
            if (!expires) {
                expires = new Date();
            }
            document.cookie = name + "=" + escape(value) + "; expires=" + expires.toGMTString() + "; path=/";
        }


        function ShowSuccessMess(mess) {
            $("#alert_body").html(mess);
            $("#alert_title").html('Success');
            $("#lnkDialog").click();
            $.mobile.hidePageLoadingMsg();
        }

        function ShowInfoMess(mess) {
            $("#alert_body").html(mess);
            $("#alert_title").html('Message');
            $("#lnkDialog").click();
            $.mobile.hidePageLoadingMsg();
        }

        function ShowAlertMess(mess) {
            $("#alert_body").html(mess);
            $("#alert_title").html('Alert');
            $("#lnkDialog").click();
            $.mobile.hidePageLoadingMsg();
        }

        function errorHandler(e) {
            alert('a');
            ShowAlertMess(e.status + ' ' + e.statusText);
        }


        function ParseJson(JSONtext) {
            try {
                JSONobject = JSON.parse(JSONtext);
            } catch (e) {
                alert('a1');
                ShowAlertMess('JSON Error');
                return;
            }

            if (JSONobject.cod != '200') {
                alert('a2');
                ShowAlertMess('Error ' + JSONobject.cod + ' (' + JSONobject.message + ')');
                return;
            }

            return JSONobject;
        }

        $(document).ready(function () {
            //openDb();
            //addLastPosition('123', '456', 'Villa');
            $('div.gallery-page').live('pageshow', function (e) {

                // Re-initialize with the photos for the current page
                $("div.gallery a", e.target).photoSwipe();
                return true;

            })


            $('#rfh').click(function () {
                addLastPosition('123', '456', 'Villa');
                UpdateMyPosition();
            });

            $('#backbt').click(function () {
                parent.history.back();
                return false;
            });


            $('#bt_gallery').click(function () {
                window.location.href = '#Gallery';
                return false;
            });
            $('#bck1').click(function () {
                parent.history.back();
                return false;
            });
            $('#bck2').click(function () {
                parent.history.back();
                return false;
            });
            $('#bck3').click(function () {
                parent.history.back();
                return false;
            });
            $('#bck4').click(function () {
                parent.history.back();
                return false;
            });
            $('#bck5').click(function () {
                parent.history.back();
                return false;
            });
            $('#bck6').click(function () {
                parent.history.back();
                return false;
            });




            $('#rfh2').click(function () {
                UpdateMeteo();
            });



            SetWeather();

            ReadXml();

            $('select#slideBussola').change(function () {
                slideBussola = $('select#slideBussola').val();
                if (slideBussola == 'Y') {
                    stopWatch();
                }
                else {
                    startWatch();
                }
            });

            $('select#flipView').change(function () {
                flipView = $('select#flipView').val();
                beachfinderby = this.value;

                var centerMap = map.getCenter();
                var zoomMap = map.getZoom();
                var myOptions = {
                    zoom: zoomMap,
                    center: centerMap,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }


                map = new google.maps.Map(document.getElementById("mapmap"), myOptions);
                //alert('map: ' +map);

                setMarkers(map, sites);
                infowindow = new google.maps.InfoWindow({
                    content: "loading..."
                });

                var bikeLayer = new google.maps.BicyclingLayer();
                bikeLayer.setMap(map);
            });

        });

        //googleutils.js


        $(document).ready(function () {
            $('#bt_view_ds').click(function () {
                alert('bt_view_ds');
            });

            $('#BeachFinderBy').change(function () {
                beachfinderby = this.value;

                var centerMap = map.getCenter();
                var zoomMap = map.getZoom();
                var myOptions = {
                    zoom: zoomMap,
                    center: centerMap,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }


                map = new google.maps.Map(document.getElementById("mapmap"), myOptions);
                //alert('map: ' +map);

                setMarkers(map, sites);
                infowindow = new google.maps.InfoWindow({
                    content: "loading..."
                });

                var bikeLayer = new google.maps.BicyclingLayer();
                bikeLayer.setMap(map);

            });


            //jmain

        });


        function ReadXml(xmlDoc) {
            //            $.ajax({
            //                type: "GET",
            //                url: "spiagge/1.xml",
            //                dataType: "xml",
            //                success: parseXml
            //            });

            ReadXmlBeach();









            //$.getJSON(url, parsexmlwcf).error(errorparsexmlscf);



        };

        function parsexmlwcf(d) {
            alert('success');
        };

        function errorparsexmlscf(e) {
            alert('error' + e.status + ' ' + e.statusText);

        };


        sites = [];
        function parseXml(xmlDoc) {
            //alert('parseXml');
            $(xmlDoc).find('spiaggia').each(function () {
                //alert('a');
                var spiaggia = $(this)
                var id = spiaggia.attr('id');
                var nome = spiaggia.attr('nome');
                var lat = spiaggia.attr('lat');
                var lon = spiaggia.attr('lon');
                var descrizione = spiaggia.find('descrizione').text();
                var windNO = spiaggia.find('windNO').text();
                var parking = spiaggia.find('parcheggio').text();
                var bar = spiaggia.find('bar').text();
                var disabili = spiaggia.find('disabili').text();
                var xbambini = spiaggia.find('xbambini').text();
                var surf = spiaggia.find('surf').text();
                var rent = spiaggia.find('attrezzata').text();
                var photo = spiaggia.find('foto').text();
                var camper = spiaggia.find('foto').text();
                //   
                //var beach = [nome, lat, lon, 1, descrizione, windNO, parking, bar, id, disabili, xbambini, surf, rent, photo, camper]
                //alert(beach);
                // sites.push(beach);
            });
            //alert('parseXmlEnd');

            UpdateMyPosition();
        };

        function UpdateMyPosition() {
            lat1 = 0;
            lngt1 = 0;
            dist1 = 1000;
            lat2 = 0;
            lngt2 = 0;
            dist2 = 1000;
            lat3 = 0;
            lngt3 = 0;
            dist3 = 1000;
            lat4 = 0;
            lngt4 = 0;
            dist4 = 1000;
            lat5 = 0;
            lngt5 = 0;
            dist5 = 1000;
            CleartBeachByDistance();
            // alert('UpdateMyPosition');
            //LEggo le mie coordinate
            var Geo = {};
            if (navigator.geolocation) {
                //alert('navigator.geolocation on')
                navigator.geolocation.getCurrentPosition(success, onError, { maximumAge: 60000, timeout: 60000, enableHighAccuracy: true });
            }
            else {
                alert('navigator.geolocation off')
            }
        };
        //Get the latitude and the longitude;
        function success(position) {
            //alert('success');
            mylat = position.coords.latitude;
            mylng = position.coords.longitude;

            var geocoder = null;
            geocoder = new google.maps.Geocoder();
            var latlng = new google.maps.LatLng(mylat, mylng);
            geocoder.geocode({ 'latLng': latlng }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {

                    if (results[1]) {
                        //                          map.setZoom(11);
                        //                          marker = new google.maps.Marker({
                        //                              position: latlng,
                        //                              map: map
                        //                          });
                        markerMyPosition = new google.maps.Marker({
                            position: latlng,
                            map: map
                        });
                        OriginPosition = results[1].formatted_address;
                        $('#OriginPosition').html(OriginPosition);
                        //alert(results[1].formatted_address);
                        //infowindow.setContent(results[1].formatted_address);
                        //infowindow.open(map, marker);
                    }
                } else {
                    alert("Geocoder failed due to: " + status);
                }
            });


            count_tmp_beach = 0;
            for (var i = 0; i < sites.length; i++) {
                var info = sites[i];

                Calcdistance(info[1], info[2], mylat, mylng, info[0]);
                PopulateFirstBeachByDistance();
            }
            PopulateFirstBeachByDistance();


        }

        function onError(error) {
            alert('code: ' + error.code + '\n' +
                            'message: ' + error.message + '\n');
        }



        /*================================== initilize Pressure =================================*/

        function addLoadEvent(func) {
            var oldonload = window.onload;
            if (typeof window.onload != 'function') {
                window.onload = func;
            } else {
                window.onload = function () {
                    if (oldonload) {
                        oldonload();
                    }
                    func();
                }
            }
        }

        addLoadEvent(function () {

            // Draw the gauge using custom settings
            options = {
                label: 'Pressure!',
                unitsLabel: ' hpa',
                min: 950,
                max: 1050,
                majorTicks: 4,
                minorTicks: 3, // small ticks inside each major tick
                greenFrom: 1010,
                greenTo: 1050,
                yellowFrom: 980,
                yellowTo: 1010,
                redFrom: 950,
                redTo: 980
            };
            gm = new Gauge(document.getElementById('gauge_pres'), options);
            gm.setValue(0);

        });
        /*================================== initilize Pressure END =================================*/


        /*================================== initilize MAPS =================================*/



        $('#main').live('pageshow', function (event, ui) {

            $("div[class$='slidein-panel']").animate({ 'left': -$("div[class$='slidein-panel']").outerWidth() });
            status = 'close';

        });

        //jbeachliveshow.js;



        //jmeteoliveshow.js;


        //jmapliveshow

        /*================================== initilize MAP END =================================*/







        var lat;
        if ('40.921371' != '') lat = 40.921371;

        var lng;
        if ('9.48563' != '') lng = 9.48563;

        var time_zone = 1000 * (new Date().getTimezoneOffset()) * (-60);
        var current_city_id;

        if (get_cookie('cityid')) current_city_id = get_cookie('cityid');

        if ('3172087' != '') {
            current_city_id = 3172087;
        }

        // ******************* city functions ***********************

        // **************************** forecast *******************************
        function getDataForecast(JSONobject) {
            //JSONobject = ParseJson(JSONtext);
            //data = JSONobject.list;

            var curdate = new Date() - 45 * 60 * 1000;

            //console.log("time zone" + time_zone);
            var html = ''
            var lastday = 0;

            // 
            var ar_tmin = new Array();
            var ar_tmax = new Array();
            min_cur = 500;
            max_cur = 0;

            rr = new Date(JSONobject.list[0].dt * 1000 + time_zone);
            lastday = rr.getDate();

            for (var i = 0; i < JSONobject.list.length; i++) {
                var dt = new Date(JSONobject.list[i].dt * 1000 + time_zone);
                var day = dt.getDate();

                if (curdate > dt) continue;

                if (day != lastday) {
                    lastday = day;
                    ar_tmin.push(min_cur);
                    ar_tmax.push(max_cur);
                    max_cur = 0;
                    min_cur = 500;
                }

                if (JSONobject.list[i].main.temp < min_cur)
                    min_cur = JSONobject.list[i].main.temp;
                if (JSONobject.list[i].main.temp > max_cur)
                    max_cur = JSONobject.list[i].main.temp;
                //console.log(JSONobject.list[i].main.temp);
            }
            ar_tmin.push(min_cur);
            ar_tmax.push(max_cur);

            lastday = 0;
            /* <li class="indpr-1 myindpr"><a href="#" class="nomar" data-ajax="false">
            <img src="images/palm_tree.png" class="picture" alt="winelovers420x260" />
            <p><div id="Div18">
            </div></p></a></li>*/
            for (var i = 0; i < JSONobject.list.length; i++) {

                var dt = new Date(JSONobject.list[i].dt * 1000 + time_zone);

                if (curdate > dt) continue;
                var day = dt.getDate();
                var hr = dt.getHours();
                if (hr < 10) hr = '0' + hr;

                var curr_date = dt.getDate();
                var curr_month = dt.getMonth() + 1; //Months are zero based
                var curr_year = dt.getFullYear();

                moment.lang('it')
                var data = moment(dt).format('dddd Do MMMM YYYY');
                //alert(data);

                if (day != lastday) {
                    if (lastday != 0)
                        html = html + "</li></ul>";
                    //                    html = html + "<li class='indpr-1 myindpr'><a href='#' class='nomar' data-ajax='false'>";
                    //                    html = html + "<p><div>";
                    //                    html = html + curr_date + '/' + curr_month + '/' + curr_year;
                    //                    html = html + " Temp. min " + Math.round(ar_tmin.shift()) + " max " + Math.round(ar_tmax.shift()) + "°C";
                    //                    html = html + "</div></p></a><ul  data-role=listview data-inset=true>";
                    html = html + "<li class=indpr-1 myindpr><h3>" + data + "</h3> \
			<p>Temp. min " + Math.round(ar_tmin.shift()) + " max " +
				Math.round(ar_tmax.shift()) + "°C</p><ul  data-role=listview data-inset=true>";
                    lastday = day;
                }
                var temp = Math.round(JSONobject.list[i].main.temp);
                var tmin = Math.round(JSONobject.list[i].main.temp_min);
                var tmax = Math.round(JSONobject.list[i].main.temp_max);

                var icon_cod = JSONobject.list[i]['weather'][0]['icon'];

                //var img = '<img src="http://openweathermap.org/img/w/' + icon_cod + '.png">';
                var img = '<img src="images/' + icon_cod + '.png">';
                var wind = JSONobject.list[i].wind.speed;
                var pressure = JSONobject.list[i].main.pressure;
                var cloud = JSONobject.list[i].clouds.all;

                var lang = 'it';
                //if (get_cookie('lang') == 'en') lang = 'en';
                if (lang == 'en') {
                    html = html + '<li class=indpr-1 myindpr>' + img + '<h1>' + hr + ':00 </h1> <span class="ui-li-count"><h5>' + temp + '°C</h5></span>' +
'<p><strong>Temp. from ' + tmin + ' to ' + tmax + '°C</strong></p><p> Wind ' + wind +
' m/s.</p><p> Clouds ' + cloud + ' % ' + pressure + ' hpa</p></li>';
                }
                else {
                    html = html + '<li class=indpr-1 myindpr>' + img + '<h1>' + hr + ':00 </h1> <span class="ui-li-count"><h5>' + temp + '°C</h5></span>' +
'<p><strong>Temp. min ' + tmin + ' max ' + tmax + '°C</strong></p><p> Vento ' + wind +
' m/s.</p><p> nuvolosità ' + cloud + ' % ' + pressure + ' hpa</p></li>';
                }

            }

            html = '<ul data-role="listview" id="forecast_list_data_" data-inset=true>' + html + '</ul>';

            $("#forecast_list_ul").html(html);
            $("#forecast_list_data_").listview();

            $.mobile.hidePageLoadingMsg();
        };






        /*================================== wind ROSE END =================================*/









        function getHistoryData_chart(JSONtext) {
            alert('getHistoryData_chart');
            JSONobject = ParseJson(JSONtext);
            data = JSONobject.list;
            showBarsDouble('chart_container', data);
            $.mobile.hidePageLoadingMsg();
        }

        function getHistoryData_wind(JSONtext) {
            alert('getHistoryData_wind');
            JSONobject = ParseJson(JSONtext);
            data = JSONobject.list;
            showPolarSpeed('chart_container', data);
            $.mobile.hidePageLoadingMsg();
        }


        function getHistoryData_pres(JSONtext) {
            alert('getHistoryData_pres');
            JSONobject = ParseJson(JSONtext);
            data = JSONobject.list;
            chartDoublePress('chart_container', data);
            $.mobile.hidePageLoadingMsg();
        }

        // **************** install *****************
        function ShowIphoneApp() {

            $('#app_install_div').toggle();
            setTimeout(function () {
                window.scrollTo(0, 1);
            }, 0);

            setTimeout(function () {
                $('#instructions_dialog').animate(
                    { top: '420px' }, 1700, 'easeOutBounce'
		);
            }, 300);
        }

        $('#app_install_div').live('vclick', function (event, ui) {
            $(this).hide();
            return false;
        });


        // *************** event handler ************************


        jQuery(document).ready(function () {

            $('#city_wind_lbl').html('0');

            $("form").submit(function (event) {
                event.stopPropagation();
                event.preventDefault();
                var txt = $('#search-city').attr('value');
                $.mobile.showPageLoadingMsg();
                alert('search');
                $.get('http://api.openweathermap.org//data/2.1/find/name?q=' + txt + '&type=like&sort=population', showFind).error(errorHandler);


                return false;
            });

        });




        $('#dialogpage').live('pageshow', function (event, ui) {
        });

        $('#chart').live('pageshow', function (event, ui) {

            $("div[class$='slidein-panel']").animate({ 'left': -$("div[class$='slidein-panel']").outerWidth() });
            status = 'close';

            // date start
            $.mobile.showPageLoadingMsg();
            getWindRose();
            //            var curd = new Date();
            //            var d = new Date(curd.getFullYear(), curd.getMonth(), curd.getDate());
            //            var s = Math.round((d.getTime()) / 1000) - 3600 * 24;

            //            var jsonurl = "http://m.openweathermap.org/data/2.1/history/city/?id=" + current_city_id + "&cnt=80&start=" + s;
            //alert('jsonurl:' + jsonurl);
            // $.get(jsonurl, getHistoryData_chart).error(errorHandler);
        });


        $('li #cityfind').live('vclick', function (event, ui) {
            var r = $(this).attr('href').split('&');
            if (r[1]) {
                current_city_id = r[1];
                expires = new Date();
                expires.setTime(expires.getTime() + (1000 * 3600 * 24 * 7));
                set_cookie('cityid', current_city_id, expires);

            }
        });


        $('li #chartch').live('vclick', function (event, ui) {

            $.mobile.showPageLoadingMsg();
            var curd = new Date();
            var d = new Date(curd.getFullYear(), curd.getMonth(), curd.getDate());
            var s = Math.round((d.getTime()) / 1000) - 3600 * 24;

            if ($(this).attr('href') == "#chart&1") {
                alert('chart&1');
                var jsonurl = "http://m.openweathermap.org/data/2.1/history/city/?id=" + current_city_id + "&cnt=80&start=" + s;
                $.get(jsonurl, getHistoryData_chart).error(errorHandler);
            }

            if ($(this).attr('href') == "#chart&2") {
                //Wind Rose
                $('#chart_container').show();
                $('#gauge_pres').hide();
                getWindRose();

                //alert('chart&2');
                //var jsonurl = "http://m.openweathermap.org/data/2.1/history/city/?id=" + current_city_id + "&cnt=80&start=" + s;
                //$.get(jsonurl, getHistoryData_wind).error(errorHandler);
            }

            if ($(this).attr('href') == "#chart&3") {
                $('#chart_container').hide();
                $('#gauge_pres').show();
                gm.setValue(Hpa);
                $.mobile.hidePageLoadingMsg();

                //                var jsonurl = "http://m.openweathermap.org/data/2.1/history/city/?id=" + current_city_id + "&cnt=80&start=" + s;
                //                $.get(jsonurl, getHistoryData_pres).error(errorHandler);
            }

        });

        var now = new Date();
        var minLast_forecast = 0;
        $('#forecast').live('pageshow', function (event, ui) {
            minLast_forecast = 0; (now - dt_Last_meteo) / 1000 / 60;
            // alert(minLast_meteo + ' - ' + meteo_already_open);
            if (minLast_forecast > 10 || forecast_already_open == 0) {
                UpdateForecast();
            }


        });

        function UpdateForecast() {
            forecast_already_open = 1;
            dt_Last_forecast = now;
            var units = 'metric';
            if (get_cookie('units') == 'imperial') units = 'imperial';

            var lang = 'it';
            if (get_cookie('lang') == 'en') units = 'en';

            var myhref = "http://api.openweathermap.org/data/2.5/forecast?callback=?&id=" + current_city_id + '&units=' + units + '&lang=' + lang;
            //alert('forecast live');
            //$.mobile.showPageLoadingMsg();
            $.getJSON(myhref, getDataForecast);
        }


        // Add back button in heder nested list
        //        $(':jqmData(url^=forecast)').live('pagebeforecreate',
        //  function (event) {
        //      $(this).filter(':jqmData(url*=ui-page)').find(':jqmData(role=header)')
        //      .prepend('<a href="#" data-rel="back" data-icon="back">Back</a>')
        //  });


        $('li #install').live('vclick', function (event, ui) {
            ShowIphoneApp();
        });


        $('#flip-units').live('change', function (event, ui) {
            var $this = $(this),
	val = $this.val();
            expires = new Date();
            expires.setTime(expires.getTime() + (1000 * 60 * 60 * 24));
            set_cookie('units', val, expires);
            window.location.reload();
        });

        $('#flip-LANG').live('change', function (event, ui) {
            var $this = $(this),
	        val = $this.val();
            expires = new Date();
            expires.setTime(expires.getTime() + (1000 * 60 * 60 * 24));
            set_cookie('lang', val, expires);
            window.location.reload();
        });









        function showFind(JSONtext) {
            $("#station_list_ul").hide();

            list = ParseJson(JSONtext);

            var html = ''

            for (var i = 0; i < list.list.length; i++) {
                dat = '';

                var temp = Math.round((list.list[i].main.temp - 273.15) * 100) / 100;

                var weather = '';
                if (list.list[i].main.pressure)
                    weather = weather + 'Pressure: ' + list.list[i].main.pressure + ' hpa. ';

                if (list.list[i].wind && list.list[i].wind.speed)
                    weather = weather + ' Wind: ' + list.list[i].wind.speed + 'm/c';
                icon = '';
                if (list.list[i].weather[0]) {
                    //icon = "http://openweathermap.org/img/w/" + list.list[i].weather[0].icon + ".png";
                    icon = "images/" + list.list[i].weather[0].icon + ".png";
                    dat = list.list[i].weather[0].description;
                }

                //		html=html+'<li><a id="cityfind" href="#main&'+list.list[i].id+'">' +
                html = html + '<li><a rel="external" href="http://m.openweathermap.org/city/' + list.list[i].id + '">' +
		'<img src="' + icon + '" > ' +
		 '<h1>' + list.list[i].name + ', ' + list.list[i].sys.country + '</h1><p>' + weather + '</p>' +
		 '<p> ' + dat + '</p><span class="ui-li-count"><b> ' + temp + '&deg;С</b></span></a></li>';
            }

            html = '<ul id="station_list_ul_data" data-role="listview" data-theme="d" data-inset="true"><li data-role="list-divider">City</li>' + html + '</ul>';

            $("#station_list_ul").html(html);

            $("#station_list_ul_data").listview();

            $("#station_list_ul").fadeIn(1000);

            $.mobile.hidePageLoadingMsg();

        }



        console.log("Hello World19");
        //**************************** getHistoryData ****************************
        //jchartliveshow



        
    </script>
</head>
<body>
    <div id="fb-root">
    </div>
    <script>        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "http://connect.facebook.net/it_IT/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
        } (document, 'script', 'facebook-jssdk'));</script>
    <div id="splash" style="display: none;" class="app">
        <h1>
            PhoneGap</h1>
        <div id="deviceready" class="blink">
            <p class="event listening">
                Connecting to Device</p>
            <p class="event received">
                Device is Ready</p>
        </div>
    </div>
    <script type="text/javascript" src="phonegap.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
    <link rel="stylesheet" type="text/css" href="js/menu2/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="js/menu2/css/demo_.css" />
    <link rel="stylesheet" type="text/css" href="js/menu2/css/component.css" />
    <script src="js/menu2/js/modernizr.custom.25376.js"></script>
    <div data-role="page" id="main" class="type-index">
        <div id="perspective" class="perspective effect-airbnb">
            <div class="container">
                <!-- wrapper -->
                <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
                    <div class="wrapper" style="float: left; top: 10px; left:10px">
                        <!-- wrapper needed for scroll -->
                        <div class="main clearfix" style="float: left; top: 10px; left:10px">
                            <div class="column" style="float: left;top: 10px; left:10px">
                                <input type="image" id="showMenu" src="images/pinnatta-app-menu-6.png" />
                            </div>
                        </div>
                        <!-- /main -->
                    </div>
                    <center>
                        <div style="vertical-align: middle;">
                            <br />
                            <a id="A1">Sardinia Beach Finder</a>
                        </div>
                    </center>
                    <!-- wrapper -->
                </div>
                <!-- /navbar -->
                <div id="wrapper" style="height: 120px">
                    <div id="rotating-item-wrapper">
                        <a href="javascript:void(0);">
                            <img class="rotating-item swipe" alt="" src="images/beach/imagestest.jpg" /></a>
                        <a href="javascript:void(0);">
                            <img class="rotating-item swipe" alt="" src="images/beach/imagestest2.jpg" /></a>
                        <a href="javascript:void(0);">
                            <img class="rotating-item swipe" alt="" src="images/beach/imagestest3.jpg" /></a>
                        <a href="javascript:void(0);">
                            <img class="rotating-item swipe" alt="" src="images/beach/imagestest4.jpg" /></a>
                        <div id="nav" style="visibility: hidden">
                        </div>
                        <div id="next" style="opacity: 1;">
                            <a id="nextBt" href="#"></a>
                        </div>
                        <div id="previous" style="opacity: 1;">
                            <a id="prevBt" href="#"></a>
                        </div>
                    </div>
                </div>
                <div data-role="content" id="home-ct">
                    <ul data-role="listview" data-inset="true">
                        <li id="ft"><span id="lns">Spiagge piu vicine</span><span id="viall"><a href="#gmap"
                            data-ajax="false">Tutte&nbsp;&nbsp;&nbsp;</a>
                            <input type="image" src="images/Refresh.png" id="rfh" />
                        </span></li>
                        <li class="indpr-1 myindpr"><a id="lnkBeachID1" href="#Beach?id=1" class="nomar"
                            data-ajax="false">
                            <img src="images/palm_tree.png" alt="winelovers420x260" />
                            <h3 id="b1_descr" class="grl">
                            </h3>
                        </a></li>
                        <li class="indpr-1 myindpr"><a id="lnkBeachID2" href="#Beach?id=1" class="nomar"
                            data-ajax="false">
                            <img src="images/palm_tree.png" alt="winelovers420x260" />
                            <h3 id="b2_descr" class="grl">
                            </h3>
                        </a></li>
                        <li class="indpr-1 myindpr"><a id="lnkBeachID3" href="#Beach?id=1" class="nomar"
                            data-ajax="false">
                            <img src="images/palm_tree.png" alt="winelovers420x260" />
                            <h3 id="b3_descr" class="grl">
                            </h3>
                        </a></li>
                        <li class="indpr-1 myindpr"><a id="lnkBeachID4" href="#Beach?id=1" class="nomar"
                            data-ajax="false">
                            <img src="images/palm_tree.png" alt="winelovers420x260" />
                            <h3 id="b4_descr" class="grl">
                            </h3>
                        </a></li>
                    </ul>
                    <div id="section-vid" style="height: 150px">
                        <ul data-role="listview" data-inset="true">
                            <li>
                                <div class="icbody">
                                    <h3 class="grl">
                                        Le distanze sono calcolate dalla posizione :" <a id="OriginPosition"></a>"
                                    </h3>
                                    <a href="#" data-ajax="false" style="text-decoration: none;"><strong></strong></a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- /content -->
                <div id="cdcount">
                    <img id="wavef" src="images/footer_wave.png">
                </div>
            </div>
            <!-- /container -->
            <nav class="outer-nav left vertical">
		        <a href="#main" class="icon-home">Spiagge più vicine</a>
		        <a href="#gmap" class="icon-news">Mappa Spiagge</a>
		        <a href="#meteo" class="icon-image">Meteo</a>
		        <a href="#chart" class="icon-upload">Rosa dei venti</a>
		        <a href="#Setting" class="icon-star">Impostazioni</a>

	        </nav>
        </div>
       <!-- <script src="js/menu2/js/classie.js"></script>
        <script src="js/menu2/js/menu.js"></script>-->
    </div>
    <div data-role="page" id="gmap" class="type-index">
        <div id="perspectivegmap" class="perspective effect-airbnb">
            <div class="containergmap">
                <!-- wrapper -->
                <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
                   <div class="wrapper" style="float: left; top: 10px; left:10px">
                        <!-- wrapper needed for scroll -->
                        <div class="main clearfix" style="float: left; top: 10px; left:10px">
                            <div class="column" style="float: left;top: 10px; left:10px">
                                <input type="image" id="showMenugmap" src="images/pinnatta-app-menu-6.png" />
                            </div>
                        </div>
                        <!-- /main -->
                    </div>
                    <center>
                        <select id="BeachFinderBy" name="BeachFinderBy">
                            <option value="wind" selected="selected">Direzione del Vento</option>
                            <option value="near">Le 5 più vicine </option>
                            <option value="parking">Con Parcheggio </option>
                            <option value="bar">Con Bar </option>
                            <option value="child">Adatta ai bambini </option>
                            <option value="hand">Attrezzata per i disabili </option>
                            <option value="rent">Con possibilità di noleggi </option>
                            <option value="camper">Adatta per i Camper </option>
                        </select>
                    </center>
                </div>
                <div data-role="content" id="Div1">
                    <div id="mapmap" style="width: 100%; height: 400px;">
                    </div>
                    <center>
                        <div data-role="fieldcontain" style="width: 100% !important;">
                            <label for="flip-c" style="color: Blue; font-family: Comic Sans MS; font-style: italic;
                                font-size: small;">
                                Evidenzia solo le spiagge che rispettano la richiesta</label>
                            <br />
                            <select name="slider" id="flipView" data-role="slider" data-theme="e">
                                <option value="N">Attiva</option>
                                <option value="Y">Disattiva</option>
                            </select>
                        </div>
                    </center>
                    <!--<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.meridiana.it%2Fit%2Findex.aspx&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21"
                scrolling="no" frameborder="0" style="border: none; overflow: hidden; height: 21px;"
                allowtransparency="true"></iframe>-->
                </div>
                <!-- /content -->
                <div id="cdcount">
                    <img id="Img1" src="images/footer_wave.png">
                </div>
            </div>
            <!-- /container -->
            <nav class="outer-nav left vertical">
		        <a href="#main" class="icon-home">Spiagge più vicine</a>
		        <a href="#gmap" class="icon-news">Mappa Spiagge</a>
		        <a href="#meteo" class="icon-image">Meteo</a>
		        <a href="#chart" class="icon-upload">Rosa dei venti</a>
		        <a href="#Setting" class="icon-star">Impostazioni</a>

	        </nav>
        </div>
        <script src="js/menu2/js/classie.js"></script>
        <script src="js/menu2/js/menu.js"></script>
    </div>
    <div data-role="page" id="meteo" class="type-index">
        <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
            <input type="image" style="float: left; top: -20px" src="images/back.png" id="bck4" />
            <center>
                <div style="vertical-align: middle;">
                    <br />
                    <a id="A3">Meteo</a>
                </div>
            </center>
        </div>
        <div data-role="content" id="Div4">
            <ul data-role="listview" data-inset="true">
                <li id="Li1"><span id="Span1"><a style="float: right;" href="#forecast" data-ajax="false">
                    nei prossimi giorni</a>
                    <h3 id="city_name">
                    </h3>
                </span></li>
                <li class="indpr-1 myindpr"><a href="#" class="nomar" data-ajax="false">
                    <img src="images/palm_tree.png" class="picture" alt="winelovers420x260" />
                    <h2 id="city_temp" class="grl">
                    </h2>
                    <p>
                        <div id="date_m">
                        </div>
                    </p>
                </a></li>
                <li class="indpr-1 myindpr"><a href="#" class="nomar" data-ajax="false">
                    <h3>
                        <div id="city_wind_lbl">
                            ...</div>
                    </h3>
                    <div class="likea" id="city_wind">
                    </div>
                </a></li>
                <li class="indpr-1 myindpr"><a href="#" class="nomar" data-ajax="false">
                    <h3>
                        <div id="city_clouds_lbl">
                            ...
                        </div>
                    </h3>
                    <div class="likea" id="city_clouds">
                    </div>
                </a></li>
                <li class="indpr-1 myindpr"><a href="#" class="nomar" data-ajax="false">
                    <h3>
                        <div id="city_pressure_lbl">
                            ...
                        </div>
                    </h3>
                    <div class="likea" id="city_pressure">
                    </div>
                </a></li>
                <li class="indpr-1 myindpr"><a href="#" class="nomar" data-ajax="false">
                    <h3>
                        <div id="city_humidity_lbl">
                            ...
                        </div>
                    </h3>
                    <div class="likea" id="city_humidity">
                    </div>
                </a></li>
                <li class="indpr-1 myindpr"><a href="#" class="nomar" data-ajax="false">
                    <h3>
                        <h3>
                            <h3>
                                <div id="Div5">
                                </div>
                            </h3>
                            <div class="likea" id="city_weather">
                            </div>
                </a></li>
            </ul>
            <center>
                <input type="image" src="images/Refresh.png" id="rfh2" />
            </center>
        </div>
        <div id="Div10">
            <img id="Img2" src="images/footer_wave.png">
        </div>
        <div data-role="footer" id="Div11">
        </div>
        <script type="text/javascript" src="js/jquery.countdown.min.js?m=1368543442"></script>
        <script type="text/javascript" src="js/mob-generic.js?m=1368543444"></script>
        <script>
            $('#cdcount #countdown-field').countdown({ until: new Date(2015, 1 - 1, 16, 17, 00, 00), format: 'dHM', timezone: -5, layout: '<div class="countdown_section">' + '<span class="countdown_amount">{dnn}</span>D' + '<span class="countdown_amount">{hnn}</span>H' + '<span class="countdown_amount">{mnn}</span>M' });
        </script>
        <div style="display: none">
            <div id="Div12" style="width: 900px; height: 529px;">
            </div>
        </div>
    </div>
    <div data-role="page" id="Beach" class="type-index">
        <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
            <input type="image" style="position: relative; top: 10px; vertical-align: middle;
                float: left;" src="images/back_.png" id="bck1" />
            <input type="image" id="bt_gallery" style="float: right; top: 20px; bottom: 30px"
                src="images/gallery.png" id="Image1" />
            <center>
                <div style="vertical-align: middle;">
                    <br />
                    <a id="beach_Name">Spiaggia</a>
                </div>
            </center>
        </div>
        <div data-role="content" id="Div9">
            <div id="divImg" style="width: 100%; height: 200px;">
                <img id="beach_Img" src="images/beach/imagestest4.jpg" />
            </div>
            <center>
                <table style="border: 0; border-style: none; border-width: 0" cellpadding="2" cellspacing="2">
                    <tr>
                        <td>
                            <img id="img_parcheggio" src="#" height="50px" width="50px" />
                        </td>
                        <td>
                            <img id="img_bar" src="#" height="50px" width="50px" />
                        </td>
                        <td>
                            <img id="img_bambini" src="#" height="50px" width="50px" />
                        </td>
                        <td>
                            <img id="img_disabili" src="#" height="50px" width="50px" />
                        </td>
                        <td>
                            <img id="img_noleggio" src="#" height="50px" width="50px" />
                        </td>
                        <td>
                            <img id="img_camper" src="#" height="50px" width="50px" />
                        </td>
                    </tr>
                </table>
            </center>
            <div data-role="collapsible-set" data-content-theme="a" data-iconpos="right" id="set">
                <div data-role="collapsible" id="set1" data-collapsed="true">
                    <h3>
                        Descrizione</h3>
                    <p>
                        <div style="text-transform: lowercase; font-family: Arial; font-size: smaller;" id="beach_Ds">
                            questa piaggia vfdjvlfdmv ldsv jdknvckm vcdmc skjm ldjkdnlvmdc,sbvjsd, vkjdsnlkvmd,ms
                            vkjjdsknvkjdhslkv kjdvlkds vbdskjc dskjcnmds hvbkds vndbsjvnmdsbvjkndsv kjdsn vdshvksd
                            kvbkdsl fhdbfksdfjdslkfm jdsnfbsdf jkdhf dfndsmfbjds fbsdlkf
                        </div>
                    </p>
                </div>
            </div>
            <div id="divDs" style="width: 100%; height: 320px;">
                <hr />
                <h3>
                    Indicazioni Stradali</h3>
                <div style="height: 100%;" id="map_canvas">
                </div>
                <a id="beach_Drive">gira a destra </a>
            </div>
        </div>
        <div id="Div14">
            <img id="Img3" src="images/footer_wave.png">
        </div>
        <div data-role="footer" id="Div15">
        </div>
        <script type="text/javascript" src="js/jquery.countdown.min.js?m=1368543442"></script>
        <script type="text/javascript" src="js/mob-generic.js?m=1368543444"></script>
        <script>
            $('#cdcount #countdown-field').countdown({ until: new Date(2015, 1 - 1, 16, 17, 00, 00), format: 'dHM', timezone: -5, layout: '<div class="countdown_section">' + '<span class="countdown_amount">{dnn}</span>D' + '<span class="countdown_amount">{hnn}</span>H' + '<span class="countdown_amount">{mnn}</span>M' });
        </script>
        <div style="display: none">
            <div id="Div16" style="width: 900px; height: 529px;">
            </div>
        </div>
    </div>
    <div data-role="page" id="Setting" class="type-index">
        <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
            <input type="image" style="position: relative; top: 10px; vertical-align: middle;
                float: left;" src="images/back_.png" id="bck2" />
            <center>
                <div style="vertical-align: middle;">
                    <br />
                    <a id="A2">Impostazioni</a>
                </div>
            </center>
        </div>
        <div data-role="content" id="Div21">
            <ul data-role="listview" data-inset="true">
                <li id="Li2"><span id="Span3">La tua posizione</span><span id="Span4"></span></li>
                <li class="indpr-1 myindpr">
                    <img src="images/flip_flops.png" alt="winelovers420x260" />
                    <h3 id="H1" class="grl">
                        La tua posizione può essere letta in automatico o specifica un altra
                    </h3>
                </li>
            </ul>
            <ul data-role="listview" data-inset="true">
                <li id="Li3"><span id="Span5">La tua posizione</span><span id="Span6"></span></li>
                <li class="indpr-1 myindpr">
                    <img src="images/flip_flops.png" alt="winelovers420x260" />
                    <h3 id="H2" class="grl">
                    </h3>
                </li>
            </ul>
        </div>
        <!-- /content -->
        <div id="Div23">
            <img id="Img4" src="images/footer_wave.png">
        </div>
        <div id="Div24">
            <!--<ul id="social-tools">
                <li><a href="http://m.facebook.com/Norwegiancruiseline" class="iconix" rel="facebook"
                    target="_blank"></a></li>
                <li><a href="http://mobile.twitter.com/CruiseNorwegian" rel="twitter" class="iconix"
                    target="_blank"></a></li>
                <li><a class="last" href="http://m.youtube.com/user/nclfreestyle?feature=results_main"
                    rel="youtube" class="iconix" target="_blank"></a></li>
            </ul>-->
        </div>
        <div data-role="footer" id="Div25">
        </div>
        <script type="text/javascript" src="js/jquery.countdown.min.js?m=1368543442"></script>
        <script type="text/javascript" src="js/mob-generic.js?m=1368543444"></script>
        <script>
            $('#cdcount #countdown-field').countdown({ until: new Date(2015, 1 - 1, 16, 17, 00, 00), format: 'dHM', timezone: -5, layout: '<div class="countdown_section">' + '<span class="countdown_amount">{dnn}</span>D' + '<span class="countdown_amount">{hnn}</span>H' + '<span class="countdown_amount">{mnn}</span>M' });
        </script>
        <div style="display: none">
            <div id="Div26" style="width: 900px; height: 529px;">
            </div>
        </div>
    </div>
    <div data-role="page" id="Gallery">
        <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
            <input type="image" style="position: relative; top: 10px; vertical-align: middle;
                float: left;" src="images/back_.png" id="bck6" />
            <center>
                <div style="vertical-align: middle;">
                    <br />
                    <a id="A6">Galleria</a>
                </div>
            </center>
        </div>
        <div data-role="content" id="Div20">
            <div id="wrapperBeach" style="height: 300px; width: 100%">
                <div id="rotating-item-wrapperBeach">
                    <a href="javascript:void(0);">
                        <img class="rotating-item swipe" alt="" src="images/beach/imagestest.jpg" /></a>
                    <a href="javascript:void(0);">
                        <img class="rotating-item swipe" alt="" src="images/beach/imagestest2.jpg" /></a>
                    <a href="javascript:void(0);">
                        <img class="rotating-item swipe" alt="" src="images/beach/imagestest3.jpg" /></a>
                    <a href="javascript:void(0);">
                        <img class="rotating-item swipe" alt="" src="images/beach/imagestest4.jpg" /></a>
                    <div id="Div31" style="visibility: hidden">
                    </div>
                    <div id="Div36" style="opacity: 1;">
                        <a id="A7" href="#"></a>
                    </div>
                    <div id="Div37" style="opacity: 1;">
                        <a id="A8" href="#"></a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /content -->
        <div id="Div32">
            <img id="Img7" src="images/footer_wave.png">
        </div>
        <div id="Div33">
        </div>
        <div data-role="footer" id="Div34">
        </div>
        <script type="text/javascript" src="js/jquery.countdown.min.js?m=1368543442"></script>
        <script type="text/javascript" src="js/mob-generic.js?m=1368543444"></script>
        <script>
            $('#cdcount #countdown-field').countdown({ until: new Date(2015, 1 - 1, 16, 17, 00, 00), format: 'dHM', timezone: -5, layout: '<div class="countdown_section">' + '<span class="countdown_amount">{dnn}</span>D' + '<span class="countdown_amount">{hnn}</span>H' + '<span class="countdown_amount">{mnn}</span>M' });
        </script>
        <div style="display: none">
            <div id="Div35" style="width: 900px; height: 529px;">
            </div>
        </div>
    </div>
    <div data-role="page" id="chart">
        <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
            <input type="image" style="position: relative; top: 10px; vertical-align: middle;
                float: left;" src="images/back_.png" id="bck5" />
            <center>
                <div style="vertical-align: middle;">
                    <br />
                    <a id="A4">Rosa dei venti</a>
                </div>
            </center>
        </div>
        <div data-role="content" id="Div6">
            <div id="chart_container" style="float: left; background-color: Black; display: inline;
                width: 100%; height: 360px; margin: 0 auto">
            </div>
            <!-- <canvas id="myCanvas"  width="300" height="300">
                    <p>Your browser doesn't support canvas.</p>
                </canvas>
            <center>-->
            <canvas id="gauge_pres" style="display: none;" width="100%" height="350"></canvas>
            </center>
            <!--<div id="container" style="min-width: 420px; max-width: 600px; height: 400px; margin: 0 auto"></div>-->
            <div style="display: none">
                <!-- Source: http://or.water.usgs.gov/cgi-bin/grapher/graph_windrose.pl -->
                <div id="resp">
                    Here will be displayed the data from the XML file.</div>
            </div>
            <!-- <div align="center" id="heading">
                Waiting for heading...</div>
            <center>
                <select name="slider" id="slideBussola" data-role="slider" data-theme="e">
                    <option value="N" selected="selected">Bussola on</option>
                    <option value="Y">Bussola off</option>
                </select>
            </center>-->
        </div>
        <!-- /content -->
        <div id="Div7">
            <img id="Img5" src="images/footer_wave.png">
        </div>
        <div id="Div8">
        </div>
        <div data-role="footer" id="Div13">
        </div>
        <script type="text/javascript" src="js/jquery.countdown.min.js?m=1368543442"></script>
        <script type="text/javascript" src="js/mob-generic.js?m=1368543444"></script>
        <script>
            $('#cdcount #countdown-field').countdown({ until: new Date(2015, 1 - 1, 16, 17, 00, 00), format: 'dHM', timezone: -5, layout: '<div class="countdown_section">' + '<span class="countdown_amount">{dnn}</span>D' + '<span class="countdown_amount">{hnn}</span>H' + '<span class="countdown_amount">{mnn}</span>M' });
        </script>
        <div style="display: none">
            <div id="Div17" style="width: 900px; height: 529px;">
            </div>
        </div>
    </div>
    <div data-role="page" id="forecast">
        <div class="banner" style="z-index: 99999" data-role="header" role="banner" data-theme="c">
            <input type="image" style="position: relative; top: 10px; vertical-align: middle;
                float: left;" src="images/back_.png" id="bck3" />
            <center>
                <div style="vertical-align: middle;">
                    <br />
                    <a id="A5">Forecast</a>
                </div>
            </center>
        </div>
        <div data-role="content" id="Div19">
            <ul data-role="listview" data-inset="true">
                <li id="Li4"><span id="Span7">
                    <h3 id="H3">
                    </h3>
                </span><span id="Span8">Meteo dei prossimi giorni a <a id="forecast_title"></a></span>
                </li>
            </ul>
            <h3>
            </h3>
            <div id='forecast_list_ul'>
            </div>
        </div>
        <!-- /content -->
        <div id="Div27">
            <img id="Img6" src="images/footer_wave.png">
        </div>
        <div id="Div28">
        </div>
        <div data-role="footer" id="Div29">
        </div>
        <script type="text/javascript" src="js/jquery.countdown.min.js?m=1368543442"></script>
        <script type="text/javascript" src="js/mob-generic.js?m=1368543444"></script>
        <script>
            $('#cdcount #countdown-field').countdown({ until: new Date(2015, 1 - 1, 16, 17, 00, 00), format: 'dHM', timezone: -5, layout: '<div class="countdown_section">' + '<span class="countdown_amount">{dnn}</span>D' + '<span class="countdown_amount">{hnn}</span>H' + '<span class="countdown_amount">{mnn}</span>M' });
        </script>
        <div style="display: none">
            <div id="Div30" style="width: 900px; height: 529px;">
            </div>
        </div>
    </div>
</body>
</html>
